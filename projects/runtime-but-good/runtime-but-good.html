<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>runtime but good
    </title>
    <style>
        img{
            display:none;
        }
    </style>
  </head>
  <body>
    <canvas id='canvas' width='500' height="500"></canvas>
    <img id='halle' src='halle-v9.png'>
    <img id='sawblade' src='sawblade.png'>
    <img id='moon' src='moon.png'>
    <img id='tree' src='tree.png'>
    <img id='streetLight' src='street-light.png'>

    <script>
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        var sawblade = document.getElementById("sawblade");
        var moon = document.getElementById("moon");
        var tree = document.getElementById("tree");
        var streetLight = document.getElementById("streetLight");
        var halle = document.getElementById("halle");

        setInterval(main,50);

        var x = 0;
        var y = 0;
        var speedX = 0;
        var speedY = 0;
        var upPress = false;
        var leftPress = false;
        var downPress = false;
        var rightPress = false;
        var spacePress = false;
        var walkSpeed = 1;
        var frameCount = 0;
        halleHeight = 140;
        halleWidth = 85;
        pictureX = 2297;
        pictureY = 1330;


        function main(){
            frameCount++;
            ctx.clearRect(0,0,1000,1000);
            x = x + speedX;
            y = y + speedY;
            //ctx.drawImage(imageVaribale, sourceY, SourceX, sourceWidth, sourceHeight, canvasX, canvasY, finalWidth, finalHeight)
            //https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage
            //you only need the extra four source arguments if you want to only display a portion of the picture, if you want to show the whole picture you can just do drawImage(imageVar, canvasx, canvasy, width,height)
            ctx.drawImage(halle,pictureX,pictureY,halleWidth,halleHeight,x,y,halleWidth,halleHeight);
            if(frameCount > 1){
                pictureX += halleWidth;
                frameCount = 0;
                if (pictureX>=halle.width-halleWidth) {
                    pictureX = 4;
                    pictureY = 1460;
                    //whoever did the sprite sheet is a big stupid doo-doo head, and made all the Halle sprites super uneven, so if you want it to be perfect you'd have to go through
                    //frame-by-frame and mark where you want each new frame drawn, which is a pain. These coordinates (x=4,y=1460) are the closest you can get to perfect, which is why
                    // we hard-code the numbers instead of using length and width vars.
                }
                if (pictureX>=halleWidth*6 && pictureY>=1460) {
                    pictureX = 2295;
                    pictureY= 1330;
                }
            }




            if(upPress){
                speedY -= walkSpeed;
            }
            if(downPress){
                speedY += walkSpeed;
            }
            if(leftPress){
                speedX -= walkSpeed;
            }
            if(rightPress){
                speedX += walkSpeed;
            }


            if(x > canvas.width){
                speedX = -speedX;
            }
            if(x < 0){
                speedX = -speedX;
            }
            if(y > canvas.height){
                speedY = -speedY;
            }
            if(y < 0){
                speedY = -speedY;
            }
        }

    document.addEventListener("keydown", keyleftPress,false);
	document.addEventListener("keyup", keyuppress,false);

	function keyleftPress(e){
		if(e.key === "ArrowUp"){
			upPress= true;
		}
		if(e.key === "ArrowLeft"){
			leftPress= true;
		}
		if(e.key === "ArrowDown"){
			downPress= true;
		}
		if(e.key === "ArrowRight"){
			rightPress= true;
		}
		if(e.key === " "){
			spacePress= true;
		}
			
	}
	function keyuppress(e){
		if(e.key === "ArrowUp"){
			upPress= false;
		}
		if(e.key === "ArrowLeft"){
			leftPress= false;
		}
		if(e.key === "ArrowDown"){
			downPress= false;
		}
		if(e.key === "ArrowRight"){
			rightPress= false;
		}
		if(e.key === " "){
			spacePress= false;
		}
	}

    </script>
  </body>
</html>